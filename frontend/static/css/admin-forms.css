/* Стили форм админки */

/* Базовые поля */
.input, .select, .textarea{
  background: var(--card-bg);
  border: 1px solid var(--line-soft);
  color: var(--text-900);
  border-radius: var(--radius-sm);
}
.input:focus, .select:focus, .textarea:focus{
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
  border-color: var(--focus-ring);
}

/* Брендовый цвет для чекбоксов/радиокнопок */
input[type="checkbox"],
input[type="radio"]{
  accent-color: var(--brand);
}

/* Элементы форм */
.form-group { margin-bottom: 1rem; }
.form-group label{
  display:block;
  margin-bottom:.5rem;
  font-weight:700;
  color: var(--text-600);
}
.form-group input,
.form-group textarea,
.form-group select{
  width:100%;
  padding:.75rem;
  border:1px solid var(--muted);
  border-radius: var(--radius-sm);
  font-size:1rem;
  transition: border-color .3s, box-shadow .3s;
  background: var(--card-bg);
  color: var(--text-900);
}
.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus{
  outline:2px solid var(--focus-ring);
  outline-offset:2px;
  border-color: var(--focus-ring);
  box-shadow: 0 0 0 2px rgba(74,144,226,.1);
}
.form-group textarea{ height:100px; resize:vertical; }

/* Группы чекбоксов */
.checkbox-group{ display:flex; gap:1rem; }
.checkbox-item{ align-items:center; }

/* Убираем синюю рамку при фокусе на чекбоксах в категориях */
.checkbox-group input[type="checkbox"]:focus {
  outline: none;
}

/* Выделенный чекбокс "Показать на главной" и предупреждение*/
.featured-checkbox{
  background: #e8f4fd;
  border:2px solid var(--brand);
  border-radius: var(--radius);
  padding:1rem; margin-top:1rem;
  display:flex; align-items:center; gap:.75rem;
  transition: background-color .3s;
}
.featured-checkbox:hover{ background:#dff0fb; }
.featured-checkbox input[type="checkbox"]{
  width:20px; height:20px; accent-color: var(--brand);
}
.featured-checkbox label{
  font-weight:700; color:#2c5aa0; margin:0; font-size:1.1rem; cursor:pointer;
}
.featured-warning{
  color: #ff9800; 
  font-size: 0.9rem; 
  margin: 0.5rem 0 2rem; 
  padding: 0.5rem; 
  background: #fff3e0; 
  border-left: 3px solid #ff9800; 
  border-radius: 4px;
}

/* Секция загрузки */
.upload-section{
  padding-top:1.5rem; border-top:1px solid var(--line);
}
.upload-section h3{ margin-bottom:1rem; color: var(--text-700); }

/* Контейнер кнопки загрузки и спиннера */
.upload-button-container {
  display: flex;
  align-items: center;
  gap: 1rem;
}

/* Спиннер загрузки */
.upload-spinner {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--brand);
  font-size: 0.9rem;
}
.upload-spinner.hidden {
  display: none;
}

/* Анимация спиннера */
.spinner {
  width: 20px;
  height: 20px;
  border: 3px solid rgba(74, 144, 226, 0.2);
  border-top-color: var(--brand);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Сетка изображений */
.images-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(150px,1fr));
  gap:1rem; margin-top:1rem;
}
.image-item{ position:relative; }
.image-preview-container{
  width:100%; height:120px; overflow:hidden; margin-bottom:5px;
  border:2px solid var(--line); border-radius: var(--radius);
  position:relative; background: var(--bg);
}
.image-item img{ width:100%; height:100%; object-fit:cover; }

/* Кнопки на изображениях */
.delete-image, .crop-image, .set-primary-image, .primary-image-indicator{
  position:absolute; top:5px;
  border:none; border-radius:50%;
  width:25px; height:25px; cursor:pointer; font-size:14px;
  display:flex; align-items:center; justify-content:center;
  transition: opacity .3s;
  color:#fff;
}
.delete-image{ right:5px; background: var(--danger); }
.delete-image:hover{ opacity:.85; background: var(--danger-700); }
.crop-image{ right:35px; background: var(--brand); }
.crop-image:hover{ opacity:.85; background: var(--brand-600); }

/* Кнопка установки главного изображения (неактивная - серая) */
.set-primary-image{
  right:65px;
  background: rgba(128, 128, 128, 0.7);
  color: #000;
  font-size: 18px;
}
.set-primary-image:hover{
  opacity:.85;
  background: rgba(128, 128, 128, 0.9);
}

/* Индикатор главного изображения (активная - желтая) */
.primary-image-indicator{
  right:65px;
  background: #ffc107;
  color: #000;
  cursor: default;
  box-shadow: 0 2px 8px rgba(255, 193, 7, 0.4);
  font-size: 18px;
}
.primary-image-indicator:disabled{
  opacity: 1;
}

/* Единый вид контролов панели фильтров */
.filters .form-input{
  padding:6px 6px; height:36px;
  border-radius: var(--radius-sm);
  font-size:14px;
  border:1px solid var(--muted);
  background: var(--card-bg);
  box-sizing:border-box;
  color: var(--text-900);
}
.filters .form-input:focus{
  outline:none;
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(59,130,246,.15);
}

/* Базовые ширины селектов */
.filters select.form-input{ width:140px; }
#filter-reminder { width:160px; }
#limit-select{ width:57px; }

/* Таблица */
.table{
  width:100%; border-collapse:collapse;
  background: var(--card-bg);
  border-radius: var(--radius);
  overflow:hidden;
  box-shadow: var(--card-shadow);
}
.table th, .table td{
  padding:10px 12px;
  border-bottom:1px solid var(--line);
  text-align:left;
  color: var(--text-900);
}
.table thead th{
  background: var(--hover);
  font-weight:600; color: var(--text-700);
}
.table tbody tr:hover{ background: var(--hover); }
.table a[href^="tel:"]{
  text-decoration:none;
  border-bottom:1px dashed rgba(74,144,226,.4);
  font-weight:600;
}
.table a[href^="tel:"]:hover{
  border-bottom-color: rgba(74,144,226,.8);
  color: var(--brand);
}

/* Узкая колонка чекбокса */
.table .col-select{ width:36px; text-align:center; }
.table .col-select input[type="checkbox"]{
  width:16px; height:16px; vertical-align:middle;
}

/* Панель массовых действий */
.bulk-actions .btn[disabled]{ opacity:.55; pointer-events:none; }

/* Ячейка со строкой сообщения (обрезка) */
.td-ellipsis{
  max-width:420px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Пагинация */
.pagination{
  display:flex; justify-content:center; align-items:center;
  gap:8px; margin:16px 0 4px;
}
.page-numbers{ display:flex; gap:4px; margin:0 8px; }
.page-link{
  padding:4px 8px; border-radius: var(--radius-sm);
  border:1px solid var(--line);
  color: var(--text-700); text-decoration:none;
}
.page-link:hover{
  background:#f0f4ff; border-color: var(--brand);
}
.page-link.active{
  background: var(--brand); color:#fff; border-color: var(--brand);
  font-weight:600;
}
.dots{ padding:4px 6px; color: #888888; }

/* ============================================
   АДАПТИВНОСТЬ ФОРМ
   ============================================ */

/* Планшеты (< 768px) */
@media (max-width: 768px){
  .checkbox-group {
    flex-direction: column;
    gap: 0.5rem;
  }

  .images-grid {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 0.75rem;
  }

  .featured-checkbox {
    flex-direction: column;
    text-align: center;
    gap: 0.5rem;
  }

  /* Пагинация */
  .pagination {
    flex-wrap: wrap;
    gap: 4px;
  }

  .page-numbers {
    margin: 0 4px;
    gap: 2px;
  }

  .page-link {
    padding: 4px 6px;
    font-size: 14px;
  }

  /* Фильтры */
  .filters .form-input {
    font-size: 13px;
  }

  .filters select.form-input {
    width: auto;
    min-width: 120px;
  }
}

/* Мобильные (< 480px) */
@media (max-width: 480px){
  .form-group input,
  .form-group textarea,
  .form-group select {
    font-size: 16px; /* Предотвращает zoom на iOS */
    padding: 0.6rem;
  }

  .images-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 0.5rem;
  }

  .image-preview-container {
    height: 100px;
  }

  /* Пагинация на мобильных */
  .pagination {
    font-size: 14px;
  }

  .page-link {
    padding: 3px 5px;
    font-size: 13px;
  }

  .dots {
    padding: 3px 4px;
  }
}
