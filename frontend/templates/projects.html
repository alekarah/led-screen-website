{{define "projects-content"}}
<div class="container">
    <!-- Заголовок -->
    <div class="section-header">
        <h1>Наши проекты</h1>
        <p>Примеры выполненных работ по установке и обслуживанию LED экранов в Санкт-Петербурге и Ленинградской области</p>
    </div>

    <!-- Фильтры -->
    <div class="filters">
        <a href="/projects"
            class="filter-btn {{if not .activeCategory}}active{{end}}"
            {{if not .activeCategory}}aria-current="page"{{end}}>
            Все проекты
        </a>

        {{range .categories}}
            <a href="/projects?category={{.Slug}}"
            class="filter-btn {{if eq $.activeCategory .Slug}}active{{end}}"
            {{if eq $.activeCategory .Slug}}aria-current="page"{{end}}>
            {{.Name}}
            </a>
        {{end}}
    </div>

    <!-- Сетка проектов -->
    <div class="projects-grid" id="projectsGrid">
        {{range .projects}}
        <div class="public-project-card">
            <div class="public-project-image">
                {{if .Images}}
                    {{$primaryImg := primaryImage .Images}}
                    <img src="/static/uploads/{{$primaryImg.Filename}}"
                        alt="{{.Title}}"
                        loading="lazy"
                        style="transform: scale({{if $primaryImg.CropScale}}{{$primaryImg.CropScale}}{{else}}1{{end}})
                                        translate({{mul (sub $primaryImg.CropX 50) 2}}%, {{mul (sub $primaryImg.CropY 50) 2}}%);
                                object-position: center center;
                                transform-origin: center center;">
                {{else}}
                    <img src="/static/images/placeholder.jpg" alt="{{.Title}}" loading="lazy">
                {{end}}
            </div>
            <div class="project-content public-project-content">
                <h3 class="project-title">{{.Title}}</h3>
                <div class="project-size">{{.Size}}</div>
                <p class="project-description">{{.Description}}</p>
                <div class="project-bottom">
                    <div class="project-location">{{.Location}}</div>
                    <div class="project-categories">
                        {{range .Categories}}
                        <span class="category-tag">{{.Name}}</span>
                        {{end}}
                    </div>
                    <a href="/projects/{{.Slug}}"
                        class="project-detail-btn"
                        data-project-id="{{.ID}}"
                        data-project-slug="{{.Slug}}"
                        data-images='{{toJSON .Images}}'>
                        Подробнее
                    </a>
                </div>
            </div>
        </div>
        {{end}}
    </div>

    <!-- Кнопка "Смотреть еще" -->
    <div class="load-more-container" id="loadMoreContainer">
        <button class="load-more-btn" id="loadMoreBtn">Смотреть еще</button>
    </div>
</div>
{{end}}

{{define "projects-footer"}}
<!-- Статистика -->
<section class="stats-section">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-item">
                <h3>200+</h3>
                <p>Завершенных проектов</p>
            </div>
            <div class="stat-item">
                <h3>5</h3>
                <p>Лет опыта</p>
            </div>
            <div class="stat-item">
                <h3>24/7</h3>
                <p>Техническая поддержка</p>
            </div>
            <div class="stat-item">
                <h3>100%</h3>
                <p>Гарантия качества</p>
            </div>
        </div>
    </div>
</section>
{{end}}