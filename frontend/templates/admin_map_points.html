{{define "admin-map-points-content"}}
<div class="form-section" style="display:flex;gap:0.75rem;flex-wrap:wrap;">
    <button class="btn" id="openCreateMapPointModal">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É</button>
    <button class="btn" id="openImportLinkModal">–ò–º–ø–æ—Ä—Ç –∏–∑ —Å—Å—ã–ª–∫–∏</button>
    <button class="btn" id="openBulkImportModal">–ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç</button>
</div>

<!-- –°–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ -->
<div class="projects-list">
    <h2>–¢–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ ({{len .MapPoints}})</h2>
    <div id="sortable-map-points" class="sortable-list">
        {{range .MapPoints}}
        <div class="project-item" data-point-id="{{.ID}}">
            <div class="project-info">
                <div class="project-info-flex">
                    <span class="drag-handle" title="–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞" role="button" aria-label="–ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å">‚ãÆ‚ãÆ</span>
                    <div class="project-thumbnail map-point-icon-thumb">
                        <img src="/static/images/map-icons/{{.IconType}}.svg" alt="{{.IconType}}" onerror="this.parentElement.innerHTML='üìç'">
                    </div>
                    <div>
                        <h3>{{.Title}}</h3>
                        {{if .Description}}<p>{{.Description}}</p>{{end}}
                        <p><small>
                            –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {{.Latitude}}, {{.Longitude}} |
                            {{if .PanoramaURL}}<a href="{{.PanoramaURL}}" target="_blank">–ü–∞–Ω–æ—Ä–∞–º–∞</a> | {{end}}
                            –°—Ç–∞—Ç—É—Å: {{if .IsActive}}<span class="featured-yes">‚úì –ê–∫—Ç–∏–≤–Ω–∞</span>{{else}}<span class="featured-no">–°–∫—Ä—ã—Ç–∞</span>{{end}}
                        </small></p>
                    </div>
                </div>
            </div>
            <div class="project-actions">
                <button class="btn" onclick="editMapPoint({{.ID}})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-danger" onclick="deleteMapPoint({{.ID}}, '{{.Title}}')">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}

{{define "map-points-modals"}}
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è -->
<div id="createMapPointModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç—É</h2>
            <span class="close" onclick="closeModal('createMapPointModal')">&times;</span>
        </div>
        <form id="createMapPointForm">
            <div class="form-group">
                <label for="createPointTitle">–ù–∞–∑–≤–∞–Ω–∏–µ <span class="required">*</span>:</label>
                <input type="text" id="createPointTitle" name="title" required placeholder="–ë–∏–ª–±–æ—Ä–¥ –Ω–∞ –ù–µ–≤—Å–∫–æ–º">
            </div>
            <div class="form-group">
                <label for="createPointDescription">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="createPointDescription" name="description" placeholder="LED —ç–∫—Ä–∞–Ω 6x3, P6"></textarea>
            </div>
            <div class="form-row" style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
                <div class="form-group">
                    <label for="createPointLat">–®–∏—Ä–æ—Ç–∞ <span class="required">*</span>:</label>
                    <input type="text" id="createPointLat" name="latitude" required placeholder="59.938784">
                </div>
                <div class="form-group">
                    <label for="createPointLng">–î–æ–ª–≥–æ—Ç–∞ <span class="required">*</span>:</label>
                    <input type="text" id="createPointLng" name="longitude" required placeholder="30.315868">
                </div>
            </div>
            <!-- –ú–∏–Ω–∏-–∫–∞—Ä—Ç–∞ -->
            <div class="form-group">
                <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ:</label>
                <div id="createPointMap" style="width:100%;height:300px;border-radius:8px;margin-top:0.5rem;"></div>
            </div>
            <div class="form-group">
                <label for="createPointIconType">–¢–∏–ø —Ä–µ–∫–ª–∞–º–æ–Ω–æ—Å–∏—Ç–µ–ª—è:</label>
                <select id="createPointIconType" name="icon_type">
                    <option value="billboard">–ë–∏–ª–±–æ—Ä–¥</option>
                    <option value="supersign">–°—É–ø–µ—Ä—Å–∞–π—Ç</option>
                    <option value="lightposter">–õ–∞–π—Ç–ø–æ—Å—Ç–µ—Ä</option>
                    <option value="cityboard">–°–∏—Ç–∏–±–æ—Ä–¥</option>
                    <option value="media_facade">–ú–µ–¥–∏–∞—Ñ–∞—Å–∞–¥</option>
                    <option value="gas_station">–ê–ó–°</option>
                    <option value="indoor_screen">–ò–Ω—Ç–µ—Ä—å–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω</option>
                </select>
            </div>
            <div class="form-group">
                <label for="createPointPanorama">–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–∞–Ω–æ—Ä–∞–º—É:</label>
                <input type="url" id="createPointPanorama" name="panorama_url" placeholder="https://yandex.ru/maps/...">
            </div>
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="createPointActive" name="is_active" checked>
                    –ê–∫—Ç–∏–≤–Ω–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ)
                </label>
            </div>
            <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="editMapPointModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫—É</h2>
            <span class="close" onclick="closeModal('editMapPointModal')">&times;</span>
        </div>
        <form id="editMapPointForm">
            <input type="hidden" id="editPointId">
            <div class="form-group">
                <label for="editPointTitle">–ù–∞–∑–≤–∞–Ω–∏–µ <span class="required">*</span>:</label>
                <input type="text" id="editPointTitle" name="title" required>
            </div>
            <div class="form-group">
                <label for="editPointDescription">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="editPointDescription" name="description"></textarea>
            </div>
            <div class="form-row" style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
                <div class="form-group">
                    <label for="editPointLat">–®–∏—Ä–æ—Ç–∞ <span class="required">*</span>:</label>
                    <input type="text" id="editPointLat" name="latitude" required>
                </div>
                <div class="form-group">
                    <label for="editPointLng">–î–æ–ª–≥–æ—Ç–∞ <span class="required">*</span>:</label>
                    <input type="text" id="editPointLng" name="longitude" required>
                </div>
            </div>
            <!-- –ú–∏–Ω–∏-–∫–∞—Ä—Ç–∞ -->
            <div class="form-group">
                <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ:</label>
                <div id="editPointMap" style="width:100%;height:300px;border-radius:8px;margin-top:0.5rem;"></div>
            </div>
            <div class="form-group">
                <label for="editPointIconType">–¢–∏–ø —Ä–µ–∫–ª–∞–º–æ–Ω–æ—Å–∏—Ç–µ–ª—è:</label>
                <select id="editPointIconType" name="icon_type">
                    <option value="billboard">–ë–∏–ª–±–æ—Ä–¥</option>
                    <option value="supersign">–°—É–ø–µ—Ä—Å–∞–π—Ç</option>
                    <option value="lightposter">–õ–∞–π—Ç–ø–æ—Å—Ç–µ—Ä</option>
                    <option value="cityboard">–°–∏—Ç–∏–±–æ—Ä–¥</option>
                    <option value="media_facade">–ú–µ–¥–∏–∞—Ñ–∞—Å–∞–¥</option>
                    <option value="gas_station">–ê–ó–°</option>
                    <option value="indoor_screen">–ò–Ω—Ç–µ—Ä—å–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω</option>
                </select>
            </div>
            <div class="form-group">
                <label for="editPointPanorama">–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–∞–Ω–æ—Ä–∞–º—É:</label>
                <input type="url" id="editPointPanorama" name="panorama_url" placeholder="https://yandex.ru/maps/...">
            </div>
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="editPointActive" name="is_active">
                    –ê–∫—Ç–∏–≤–Ω–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ)
                </label>
            </div>
            <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ —Å—Å—ã–ª–∫–∏ -->
<div id="importLinkModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–ò–º–ø–æ—Ä—Ç –∏–∑ —Å—Å—ã–ª–∫–∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç</h2>
            <span class="close" onclick="closeModal('importLinkModal')">&times;</span>
        </div>
        <form id="importLinkForm">
            <div class="form-group">
                <label for="importLinkUrl">–°—Å—ã–ª–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç <span class="required">*</span>:</label>
                <input type="url" id="importLinkUrl" required placeholder="https://yandex.ru/maps/2/saint-petersburg/house/...?ll=30.312957%2C59.873822&z=17">
                <small style="color:#888;">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –ø–∞–Ω–æ—Ä–∞–º–∞ –±—É–¥—É—Ç –∏–∑–≤–ª–µ—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</small>
            </div>
            <div class="form-group">
                <label for="importLinkTitle">–ù–∞–∑–≤–∞–Ω–∏–µ <span class="required">*</span>:</label>
                <input type="text" id="importLinkTitle" required placeholder="–ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Å—Å—ã–ª–∫–∏">
            </div>
            <div class="form-group">
                <label for="importLinkDescription">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="importLinkDescription" placeholder="LED —ç–∫—Ä–∞–Ω 6x3, P6"></textarea>
            </div>
            <button type="submit" class="btn">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ -->
<div id="bulkImportModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>–ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç</h2>
            <span class="close" onclick="closeModal('bulkImportModal')">&times;</span>
        </div>
        <form id="bulkImportForm">
            <div class="form-group">
                <label for="bulkImportLinks">–°—Å—ã–ª–∫–∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç (–ø–æ –æ–¥–Ω–æ–π –Ω–∞ —Å—Ç—Ä–æ–∫—É):</label>
                <textarea id="bulkImportLinks" rows="12" required placeholder="https://yandex.ru/maps/...?ll=30.312957%2C59.873822...
https://yandex.ru/maps/...?ll=30.315868%2C59.938784...
https://yandex.ru/maps/..."></textarea>
                <small style="color:#888;">–ù–∞–∑–≤–∞–Ω–∏—è –±—É–¥—É—Ç –∏–∑–≤–ª–µ—á–µ–Ω—ã –∏–∑ URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ll=.</small>
            </div>
            <button type="submit" class="btn">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ</button>
        </form>
    </div>
</div>
{{end}}
