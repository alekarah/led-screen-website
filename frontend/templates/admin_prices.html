{{define "admin-prices-content"}}
<div class="form-section">
    <button class="btn" id="openCreatePriceModal">–°–æ–∑–¥–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∞–π—Å–∞</button>
</div>

<!-- –°–ø–∏—Å–æ–∫ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∞–π—Å–∞ -->
<div class="projects-list">
    <h2>–ü–æ–∑–∏—Ü–∏–∏ –ø—Ä–∞–π—Å–∞</h2>
    <div id="sortable-prices" class="sortable-list">
        {{range .PriceItems}}
        <div class="project-item price-item" data-price-id="{{.ID}}">
            <div class="project-info">
                <div class="project-info-flex">
                    <span class="drag-handle" title="–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞" role="button" aria-label="–ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å">‚ãÆ‚ãÆ</span>

                    <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ -->
                    <div class="project-thumbnail">
                        {{range .Images}}
                            {{if .IsPrimary}}
                                {{if .ThumbnailSmallPath}}
                                    <img src="{{.ThumbnailSmallPath}}" alt="{{$.Title}}">
                                {{else}}
                                    <img src="{{.FilePath}}" alt="{{$.Title}}">
                                {{end}}
                            {{end}}
                        {{else}}
                            <div class="no-image">üí∞</div>
                        {{end}}
                    </div>

                    <div>
                        <h3>{{.Title}}</h3>
                        <p>{{.Description}}</p>
                        <p><small>
                            –¶–µ–Ω–∞: –æ—Ç {{.PriceFrom}} ‚ÇΩ |
                            –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: {{if .HasSpecifications}}<span class="featured-yes">‚úì –î–∞</span>{{else}}<span class="featured-no">–ù–µ—Ç</span>{{end}} |
                            –°—Ç–∞—Ç—É—Å: {{if .IsActive}}<span class="featured-yes">‚úì –ê–∫—Ç–∏–≤–Ω–∞</span>{{else}}<span class="featured-no">–°–∫—Ä—ã—Ç–∞</span>{{end}}
                        </small></p>
                    </div>
                </div>
            </div>
            <div class="project-actions">
                <button class="btn" onclick="openEditPriceModal({{.ID}})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-danger" onclick="deletePrice({{.ID}}, '{{.Title}}')">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}

{{define "price-modals"}}
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è -->
<div id="createPriceModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>–°–æ–∑–¥–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∞–π—Å–∞</h2>
            <span class="close" onclick="closeModal('createPriceModal')">&times;</span>
        </div>
        <form id="createPriceForm" enctype="multipart/form-data">
            <div class="form-group">
                <label for="createTitle">–ù–∞–∑–≤–∞–Ω–∏–µ <span class="required">*</span>:</label>
                <input type="text" id="createTitle" name="title" required>
            </div>

            <div class="form-group">
                <label for="createDescription">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="createDescription" name="description"></textarea>
            </div>

            <div class="form-group">
                <label for="createPriceFrom">–¶–µ–Ω–∞ –æ—Ç (‚ÇΩ) <span class="required">*</span>:</label>
                <input type="number" id="createPriceFrom" name="price_from" required min="0" placeholder="250000">
            </div>

            <div class="checkbox-row">
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="createHasSpecifications" name="has_specifications">
                        <span>–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫</span>
                    </label>
                </div>

                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="createIsActive" name="is_active" checked>
                        <span>–ê–∫—Ç–∏–≤–Ω–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ)</span>
                    </label>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ—Å–ª–∏ –≥–∞–ª–æ—á–∫–∞ –≤—ã–±—Ä–∞–Ω–∞) -->
            <div id="createSpecificationsBlock" class="specifications-block" style="display: none;">
                <h3>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <div id="createSpecifications"></div>
                <button type="button" class="btn btn-secondary" id="addCreateSpecGroup">+ –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('createPriceModal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="editPriceModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∞–π—Å–∞</h2>
            <span class="close" onclick="closeModal('editPriceModal')">&times;</span>
        </div>
        <form id="editPriceForm">
            <input type="hidden" id="editPriceId">

            <div class="form-group">
                <label for="editTitle">–ù–∞–∑–≤–∞–Ω–∏–µ <span class="required">*</span>:</label>
                <input type="text" id="editTitle" name="title" required>
            </div>

            <div class="form-group">
                <label for="editDescription">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="editDescription" name="description"></textarea>
            </div>

            <div class="form-group">
                <label for="editPriceFrom">–¶–µ–Ω–∞ –æ—Ç (‚ÇΩ) <span class="required">*</span>:</label>
                <input type="number" id="editPriceFrom" name="price_from" required min="0">
            </div>

            <div class="checkbox-row">
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="editHasSpecifications" name="has_specifications">
                        <span>–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫</span>
                    </label>
                </div>

                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="editIsActive" name="is_active">
                        <span>–ê–∫—Ç–∏–≤–Ω–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ)</span>
                    </label>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ -->
            <div id="editSpecificationsBlock" class="specifications-block" style="display: none;">
                <h3>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                <div id="editSpecifications"></div>
                <button type="button" class="btn btn-secondary" id="addEditSpecGroup">+ –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</button>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('editPriceModal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
        <div class="upload-section">
            <h3>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏</h3>
            <div id="price_images" class="images-grid">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <form id="editPriceImageForm" method="post" enctype="multipart/form-data" class="project-upload-form">
                <div class="form-group">
                    <label for="editPriceImages">–î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
                    <input type="file" id="editPriceImages" name="images" accept="image/*" multiple>
                </div>
                <div class="upload-button-container">
                    <button type="submit" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <div id="priceUploadSpinner" class="upload-spinner hidden">
                        <div class="spinner"></div>
                        <span>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...</span>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{{end}}
