# üîç –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–¥–∞ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ø–µ—Ä–µ–¥ push –≤ GitHub.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```powershell
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
.\check-code.ps1
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ö–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–æ–∫

---

## –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

### 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```powershell
cd backend
go test ./... -v
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:** –≤—Å–µ 22 unit —Ç–µ—Å—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
PASS
ok  	ledsite/internal/handlers	1.8s
ok  	ledsite/internal/middleware	0.8s
```

### 2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```powershell
cd backend
go fmt ./...
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤–µ—Å—å Go –∫–æ–¥

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º

```powershell
cd backend
golangci-lint run
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- Variable shadowing (–∑–∞—Ç–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- Unchecked errors (–Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏)
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (gofmt, goimports)
- –ò –µ—â–µ 50+ –ø—Ä–æ–≤–µ—Ä–æ–∫

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ golangci-lint

### Windows (PowerShell)

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Go (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```powershell
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Scoop**
```powershell
scoop install golangci-lint
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Chocolatey**
```powershell
choco install golangci-lint
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```powershell
golangci-lint version
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: golangci-lint has version 1.xx.x
```

---

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞

### 1. Variable shadowing (–∑–∞—Ç–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)

**–û—à–∏–±–∫–∞:**
```go
err := db.Connect()
if err != nil { ... }

// ‚ùå –ó–∞—Ç–µ–Ω–µ–Ω–∏–µ - —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è err
if err := db.Migrate(); err != nil { ... }
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```go
err := db.Connect()
if err != nil { ... }

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥–æ–µ –∏–º—è
if migrateErr := db.Migrate(); migrateErr != nil { ... }
```

### 2. Unchecked errors (–Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏)

**–û—à–∏–±–∫–∞:**
```go
// ‚ùå –û—à–∏–±–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
strconv.Atoi(c.Query("page"))
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```go
// ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—à–∏–±–∫—É
page := 1
if p, err := strconv.Atoi(c.Query("page")); err == nil && p > 0 {
    page = p
}
```

### 3. Import formatting (–ø–æ—Ä—è–¥–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤)

**–û—à–∏–±–∫–∞:**
```go
import (
    "net/http"
    "github.com/gin-gonic/gin"  // ‚ùå –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∏–º–ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
    "myproject/internal/models"
)
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```go
import (
    "net/http"

    "myproject/internal/models"

    "github.com/gin-gonic/gin"
)
```

---

## Workflow –ø–µ—Ä–µ–¥ push

```powershell
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥
.\check-code.ps1

# 2. –ï—Å–ª–∏ –≤—Å—ë –û–ö - –∫–æ–º–º–∏—Ç–∏–º
git add .
git status  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# 3. –ü—É—à–∏–º –≤ GitHub
git push
```

---

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ CI/CD

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º push:

1. **Test Job** - –≤—Å–µ unit —Ç–µ—Å—Ç—ã
2. **Lint Job** - golangci-lint (—Ç–µ –∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)
3. **Build Job** - –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å—ë –ø—Ä–æ—Ö–æ–¥–∏—Ç - –≤ CI/CD —Ç–æ–∂–µ –ø—Ä–æ–π–¥—ë—Ç! ‚úÖ

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ [.golangci.yml](../.golangci.yml):

```yaml
linters:
  enable:
    - errcheck      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫
    - gosimple      # –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞
    - govet         # Go vet (–≤–∫–ª—é—á–∞—è variable shadowing)
    - ineffassign   # –ë–µ—Å–ø–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
    - staticcheck   # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    - unused        # –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
```

---

## –°–æ–≤–µ—Ç—ã

1. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º commit**
   ```powershell
   .\check-code.ps1 && git commit -m "message"
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
   - Go (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –æ—Ç Google)
   - golangci-lint (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø—Ä—è–º–æ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ)

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
   ```json
   // settings.json –≤ VS Code
   {
       "go.formatTool": "goimports",
       "editor.formatOnSave": true
   }
   ```

---

## Troubleshooting

**–ü—Ä–æ–±–ª–µ–º–∞:** `golangci-lint: command not found`
- **–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–Ω—Ç–µ—Ä (—Å–º. —Ä–∞–∑–¥–µ–ª "–£—Å—Ç–∞–Ω–æ–≤–∫–∞")

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –Ω–æ –ª–∏–Ω—Ç–µ—Ä –ø–∞–¥–∞–µ—Ç
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `golangci-lint run --verbose` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –º–æ–≥—É —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ go install
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `$GOPATH/bin` –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
**–î–∞—Ç–∞:** –ù–æ—è–±—Ä—å 2025

**–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ - —ç–∫–æ–Ω–æ–º—å—Ç–µ –≤—Ä–µ–º—è! ‚ö°**
